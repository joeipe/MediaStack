
âœ… ByteEdge Media Stack - Final Working Setup Summary

ğŸ–¥ï¸ Host: Synology NAS
ğŸ“‚ Media Stack Base Path: /volume1/mediastack
ğŸ‘¤ Docker User: mediastack (uid=1027, gid=100)
ğŸ›¡ï¸ VPN Layer: Gluetun with NordVPN

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Docker Compose Services and URLs

â€¢ Gluetun (VPN) â€” base tunnel layer
â€¢ qBittorrent       http://<your-nas-ip>:8080/
â€¢ Sonarr            http://<your-nas-ip>:8989/
â€¢ Radarr            http://<your-nas-ip>:7878/
â€¢ Prowlarr          http://<your-nas-ip>:9696/
â€¢ Bazarr            http://<your-nas-ip>:6767/
â€¢ Jellyfin          http://<your-nas-ip>:8096/ *(outside Gluetun)*

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2. How to Find PUID and PGID

SSH into your NAS and run:
    id mediastack

Example output:
    uid=1027(mediastack) gid=100(users) groups=100(users),65536(mediagroup)

Use:
    PUID=1027
    PGID=100

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3. Permissions Setup (run via SSH)

sudo -i

chown -R 1027:100 /volume1/mediastack
chmod -R 775 /volume1/mediastack

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4. DSM Folder Permissions (via GUI)

DSM â†’ Control Panel â†’ Shared Folder â†’ mediastack â†’ Edit â†’ Permissions

âœ” User: mediastack â†’ Read/Write  
âœ” Group: mediagroup â†’ Read/Write

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5. Docker Compose Environment Variables

In each container:
    - PUID=1027
    - PGID=100
    - TZ=Australia/Sydney

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
6. Fix for Gluetun VPN TUN Error

DSM â†’ Control Panel â†’ Terminal â†’ Enable SSH

SSH into NAS using your admin user:
    ssh youradminuser@192.168.xxx.xxx

Create TUN device (run as root):
    mkdir -p /dev/net
    mknod /dev/net/tun c 10 200
    chmod 600 /dev/net/tun

To make it permanent:
DSM â†’ Control Panel â†’ Task Scheduler â†’ Triggered Task â†’ Boot-up  
Run as root:
    mkdir -p /dev/net && mknod /dev/net/tun c 10 200 && chmod 600 /dev/net/tun

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
7. Restart Stack (any time after update)

cd to project folder:

    docker compose down  
    docker compose up -d

Or restart individual containers:
    docker restart gluetun sonarr radarr bazarr prowlarr qbittorrent jellyfin

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… Status: All services run as user `mediastack` with proper access

ğŸ“ Troubleshooting Tip:
If any service shows "AppFolder /config is not writable" â†’ check:
    - PUID/PGID values
    - Folder ownership (chown)
    - DSM folder permissions
